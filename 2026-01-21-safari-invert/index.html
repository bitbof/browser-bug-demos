<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="color-scheme" content="dark light">
    <title>Safari Bug: filter invert() on SVG background-image</title>
    <style>
        :root.theme-dark {
            color-scheme: dark;
        }

        :root.theme-dark .dark-invert {
            filter: invert();
        }

        #icon {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-image: url(image.svg);
        }

    </style>
</head>
<body>
<h1>Safari Bug - filter: invert() not working on SVG with feGaussianBlur</h1>

<p><strong>Bug:</strong> The SVG file has a black shape with fill="black". The CSS applies filter: invert() to make it
    white. In Safari 26.2 (macOS, iOS), it stays black instead of inverting to white.</p>

<p>Note: The SVG contains an internal filter (feGaussianBlur). Also, the specific setup of CSS rules and JS is important for this to fail.</p>

<div style="background-color: #333; padding: 20px;">
    <p style="color: white;">Image below should be white (inverted), but stays black in Safari 26.2:</p>
    <p>img element: <img class="dark-invert" src="image.svg" width="30" height="30"></p>
    <p>background image: <span class="dark-invert" id="icon"></span></p>
    <p>inline svg:
        <svg class="dark-invert" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" width="30" height="30">
            <defs>
                <filter id="a">
                    <feGaussianBlur stdDeviation="2.3" />
                </filter>
            </defs>
            <path fill="black"
                  d="M18.1 36.38s-5.66-2.27-7.1-5.98c-1.45-3.72-2.37-12.85 3.82-13.83C21 15.6 25.43 19.51 26.2 24c.77 4.49.14 8.59.05 10.73-.15 3.62 2.68.67 3.92-1.5 4.38-7.63-.42-18.35-.05-20.89.93-6.45 9.42-3.78 10.21-.72 2.43 9.39 2.63 16.1-2.37 25.48-1.78 3.34-5.16 7.38-9.03 7.59-3.87.2-7.67-2.52-7.9-5.73-.3-4.44.16-10.32-.77-12.69-.92-2.37-.3-5.42-2.83-4.7-2.53.73-4.43 2.33-3.6 5.43.82 3.1 2.27 5.1 3.66 5.83 1.4.72.62 3.56.62 3.56z"
                  filter="url(#a)" transform="matrix(1.0575 0 0 1.05595 -1.6 -2.04)" />
        </svg>
    </p>

</div>
<script>
    // Imagine a user manually selected the dark theme.
    document.documentElement.classList.toggle('theme-dark', true);
</script>
</body>
</html>
